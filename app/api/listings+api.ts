const API_KEY = process.env.CRYPTO_API_KEY;

export async function GET(request: Request) {
  // Prevent the use of the API quota
  return Response.json(data);

  const params = new URLSearchParams(request.url.replace(/^.*\?/, ""));
  const limit = params.get("limit") || "5";

  const response = await fetch(
    `https://pro-api.coinmarketcap.com/v1/cryptocurrency/listings/latest?start=1&limit=${limit}&convert=USD`,
    {
      headers: {
        "X-CMC_PRO_API_KEY": API_KEY!,
      },
    }
  );

  const res = await response.json();
  return Response.json(res.data);
}

const data = [
  {
    id: 1,
    name: "Bitcoin",
    symbol: "BTC",
    slug: "bitcoin",
    num_market_pairs: 11590,
    date_added: "2010-07-13T00:00:00.000Z",
    tags: [
      "mineable",
      "pow",
      "sha-256",
      "store-of-value",
      "state-channel",
      "coinbase-ventures-portfolio",
      "three-arrows-capital-portfolio",
      "polychain-capital-portfolio",
      "binance-labs-portfolio",
      "blockchain-capital-portfolio",
      "boostvc-portfolio",
      "cms-holdings-portfolio",
      "dcg-portfolio",
      "dragonfly-capital-portfolio",
      "electric-capital-portfolio",
      "fabric-ventures-portfolio",
      "framework-ventures-portfolio",
      "galaxy-digital-portfolio",
      "huobi-capital-portfolio",
      "alameda-research-portfolio",
      "a16z-portfolio",
      "1confirmation-portfolio",
      "winklevoss-capital-portfolio",
      "usv-portfolio",
      "placeholder-ventures-portfolio",
      "pantera-capital-portfolio",
      "multicoin-capital-portfolio",
      "paradigm-portfolio",
      "bitcoin-ecosystem",
      "ftx-bankruptcy-estate",
    ],
    max_supply: 21000000,
    circulating_supply: 19719378,
    total_supply: 19719378,
    infinite_supply: false,
    platform: null,
    cmc_rank: 1,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2024-07-03T20:05:00.000Z",
    quote: {
      USD: {
        price: 59661.661705814935,
        volume_24h: 28032411900.32163,
        volume_change_24h: 36.9393,
        percent_change_1h: -0.61376548,
        percent_change_24h: -3.5424536,
        percent_change_7d: -2.21630244,
        percent_change_30d: -13.86042106,
        percent_change_60d: -6.81814017,
        percent_change_90d: -12.53995581,
        market_cap: 1176490859285.0896,
        market_cap_dominance: 53.4072,
        fully_diluted_market_cap: 1252894895822.11,
        tvl: null,
        last_updated: "2024-07-03T20:05:00.000Z",
      },
    },
  },
  {
    id: 1027,
    name: "Ethereum",
    symbol: "ETH",
    slug: "ethereum",
    num_market_pairs: 9117,
    date_added: "2015-08-07T00:00:00.000Z",
    tags: [
      "pos",
      "smart-contracts",
      "ethereum-ecosystem",
      "coinbase-ventures-portfolio",
      "three-arrows-capital-portfolio",
      "polychain-capital-portfolio",
      "binance-labs-portfolio",
      "blockchain-capital-portfolio",
      "boostvc-portfolio",
      "cms-holdings-portfolio",
      "dcg-portfolio",
      "dragonfly-capital-portfolio",
      "electric-capital-portfolio",
      "fabric-ventures-portfolio",
      "framework-ventures-portfolio",
      "hashkey-capital-portfolio",
      "kenetic-capital-portfolio",
      "huobi-capital-portfolio",
      "alameda-research-portfolio",
      "a16z-portfolio",
      "1confirmation-portfolio",
      "winklevoss-capital-portfolio",
      "usv-portfolio",
      "placeholder-ventures-portfolio",
      "pantera-capital-portfolio",
      "multicoin-capital-portfolio",
      "paradigm-portfolio",
      "injective-ecosystem",
      "layer-1",
      "ftx-bankruptcy-estate",
    ],
    max_supply: null,
    circulating_supply: 120193480.39085065,
    total_supply: 120193480.39085065,
    infinite_supply: true,
    platform: null,
    cmc_rank: 2,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2024-07-03T20:04:00.000Z",
    quote: {
      USD: {
        price: 3268.686844683935,
        volume_24h: 15135381568.954248,
        volume_change_24h: 53.5835,
        percent_change_1h: -0.96396706,
        percent_change_24h: -4.16346604,
        percent_change_7d: -4.09598814,
        percent_change_30d: -13.37501141,
        percent_change_60d: 4.03668043,
        percent_change_90d: -2.60985787,
        market_cap: 392874848170.35,
        market_cap_dominance: 17.8315,
        fully_diluted_market_cap: 392874848170.35,
        tvl: null,
        last_updated: "2024-07-03T20:04:00.000Z",
      },
    },
  },
  {
    id: 825,
    name: "Tether USDt",
    symbol: "USDT",
    slug: "tether",
    num_market_pairs: 90829,
    date_added: "2015-02-25T00:00:00.000Z",
    tags: [
      "stablecoin",
      "asset-backed-stablecoin",
      "avalanche-ecosystem",
      "solana-ecosystem",
      "arbitrum-ecosytem",
      "moonriver-ecosystem",
      "injective-ecosystem",
      "bnb-chain",
      "usd-stablecoin",
      "optimism-ecosystem",
      "fiat-stablecoin",
    ],
    max_supply: null,
    circulating_supply: 112644773125.90714,
    total_supply: 116076856617.66272,
    platform: {
      id: 1027,
      name: "Ethereum",
      symbol: "ETH",
      slug: "ethereum",
      token_address: "0xdac17f958d2ee523a2206206994597c13d831ec7",
    },
    infinite_supply: true,
    cmc_rank: 3,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2024-07-03T20:04:00.000Z",
    quote: {
      USD: {
        price: 0.9996061115439004,
        volume_24h: 53733489732.35002,
        volume_change_24h: 34.7155,
        percent_change_1h: 0.04260176,
        percent_change_24h: 0.11566272,
        percent_change_7d: 0.01290789,
        percent_change_30d: -0.01711674,
        percent_change_60d: -0.05138194,
        percent_change_90d: -0.09402903,
        market_cap: 112600403650.13289,
        market_cap_dominance: 5.1106,
        fully_diluted_market_cap: 116031135283.82,
        tvl: null,
        last_updated: "2024-07-03T20:04:00.000Z",
      },
    },
  },
  {
    id: 1839,
    name: "BNB",
    symbol: "BNB",
    slug: "bnb",
    num_market_pairs: 2188,
    date_added: "2017-07-25T00:00:00.000Z",
    tags: [
      "marketplace",
      "centralized-exchange",
      "payments",
      "smart-contracts",
      "alameda-research-portfolio",
      "multicoin-capital-portfolio",
      "bnb-chain",
      "layer-1",
      "sec-security-token",
      "alleged-sec-securities",
      "celsius-bankruptcy-estate",
    ],
    max_supply: null,
    circulating_supply: 147583003.00226554,
    total_supply: 147583003.00226554,
    infinite_supply: false,
    platform: null,
    cmc_rank: 4,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2024-07-03T20:04:00.000Z",
    quote: {
      USD: {
        price: 552.0536714682609,
        volume_24h: 1706999164.4643192,
        volume_change_24h: 11.5889,
        percent_change_1h: -0.88261623,
        percent_change_24h: -4.32786138,
        percent_change_7d: -3.8956414,
        percent_change_30d: -11.66857346,
        percent_change_60d: -6.53981519,
        percent_change_90d: -7.05771464,
        market_cap: 81473738653.71205,
        market_cap_dominance: 3.6979,
        fully_diluted_market_cap: 81473738653.71,
        tvl: null,
        last_updated: "2024-07-03T20:04:00.000Z",
      },
    },
  },
  {
    id: 5426,
    name: "Solana",
    symbol: "SOL",
    slug: "solana",
    num_market_pairs: 697,
    date_added: "2020-04-10T00:00:00.000Z",
    tags: [
      "pos",
      "platform",
      "solana-ecosystem",
      "cms-holdings-portfolio",
      "kenetic-capital-portfolio",
      "alameda-research-portfolio",
      "multicoin-capital-portfolio",
      "okx-ventures-portfolio",
      "layer-1",
      "ftx-bankruptcy-estate",
      "sec-security-token",
      "alleged-sec-securities",
      "cmc-crypto-awards-2024",
    ],
    max_supply: null,
    circulating_supply: 462770577.9044501,
    total_supply: 579375520.9860481,
    infinite_supply: true,
    platform: null,
    cmc_rank: 5,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2024-07-03T20:04:00.000Z",
    quote: {
      USD: {
        price: 140.4089222726036,
        volume_24h: 2728928576.20377,
        volume_change_24h: 44.7674,
        percent_change_1h: -0.82840862,
        percent_change_24h: -7.91822543,
        percent_change_7d: 1.75121646,
        percent_change_30d: -15.92577956,
        percent_change_60d: -4.85688393,
        percent_change_90d: -24.12318629,
        market_cap: 64977118103.03379,
        market_cap_dominance: 2.9491,
        fully_diluted_market_cap: 81349492492.78,
        tvl: null,
        last_updated: "2024-07-03T20:04:00.000Z",
      },
    },
  },
];
